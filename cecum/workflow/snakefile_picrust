rule all:
    input:
        "data/picrust/tmp_out_pipeline",
        "data/picrust/out_pipeline"



rule picrust2:
    input:
        seqs_fasta = "data/cecal_qiime/fasta_files/dna-sequences.fasta",
        biom = "data/cecal_qiime/total_sum_scaling.biom"
    output:
        tmp_out = "data/picrust/tmp_out_pipeline",
        out = "data/picrust/out_pipeline"
    conda:
        "picrust2"
    shell:
        """
        picrust2_pipeline.py \
            -s {input.seqs_fasta} \
            -i {input.biom} \
            -o {output.tmp_out} \
            --stratified \
            --per_sequence_contrib \
            -p 32
        
        mv {output.tmp_out} {output.out}
        """